@startuml
skinparam classAttributeIconSize 0

class UtilizadoresController {
  +Get GetUtilizador()
  +Get GetUtilizadorById(nif)
  +Post PostUtilizador()
  +Put PutUtilizador(nif, Utilizador)
  +Delete DeleteUtilizador(nif)
}

class Utilizador{
  -Int nif PK
  -String nome
  -String email
  -Double carteira
  -Int credencialId
}

class ReservasController {
  +Get GetReserva()
  +Get GetReservaById(id)
  +Post PostReserva()
  +Put PutReserva(id, reserva)
  +Delete DeleteReserva(id)
}

class Reserva {
  -Int id PK
  -Int nifUtilizador FK
  -Int parqueId FK
  -Double custo
  -Int transacaoID FK
  -Int reservaParqueId
}

class TransacoesController {
  +Get GetTransacao()
  +Get GetTransacaoById(id)
  +Post PostTransacao()
}

class Transacao {
  -Int Id PK
  -Int nifPagador FK
  -Int nifRecepiente FK
  -DateTime dataHora
  -Int metodoId FK
}

class ParquesController {
  +Get GetParque()
  +Get GetParqueById(id)
  +Post PostParque()
  +Put PutParque(id, parque)
  +Delete DeleteParque(id)
}

class Parque {
  -Int Id PK
  -String api_url

}

class MetodoPagamentosController {
  +Get GetMetodoPagamento()
  +Get GetMetodoPagamentoById(id)
  +Post PostMetodoPagamento()
  +Put PutMetodoPagamento(id, metodoPagamento)
  +Delete DeleteMetodoPagamento(id)
}

class MetodoPagamento {
  -Int Id PK
  -String nome
  -String api_url
}

abstract class Credencial {
}

class PayPal:Credencial {
  -Int Id PK
  -String email
  -String password
  -Int metodoID FK
}

class Cartao:Credencial {
  -Int Id PK
  -Int nrCartao
  -String nome
  -DateTime dataValidade
  -Int cvc
  -Int metodoID FK
}

class DebitoDireto:Credencial {
  -Int Id PK
  -String iban
  -String nome
  -String rua
  -String codigoPostal
  -String freguesia
  -DateTime dataSubscricao
  -Int metodoID FK
}



class Context {
  -DbSet<Utilizador> Utilizadores
  -DbSet<Reserva> Reservas
  -DbSet<Transacao> Transacoes
  -DbSet<Parque> Parques
  -DbSet<MetodoPagamento> MetodoPagamentos
}

UtilizadoresController ..> Utilizador
UtilizadoresController ..> Context
ReservasController ..> Reserva
ReservasController ..> Context
TransacoesController ..> Transacao
TransacoesController ..> Context
ParquesController ..> Parque
ParquesController ..> Context
MetodoPagamentosController ..> MetodoPagamento
MetodoPagamentosController ..> Context

Context "1" --> "0..*" Utilizador: tem
Context "1" --> "0..*" Reserva: tem
Context "1" --> "0..*" Transacao: tem
Context "1" --> "0..*" Parque: tem
Context "1" --> "0..*" MetodoPagamento: tem

Reserva "0..*" --> "1" Utilizador: tem
Reserva "0..*" --> "1" Transacao: tem
Transacao"1..*" --> "1" Parque: tem
Parque "0..*" --> "1" MetodoPagamento: tem
@enduml